# Introduction

This site contains materials for a workshop on multilevel modeling.

## Background

Multilevel models are useful when you have data that are nested or clustered inside social units such as schools, neighborhoods, states, or countries.

Multilevel models are also useful when you have longitudinal data where repeated measures are collected for study participants.

## Simulated Multilevel Data

The data used in these workshop materials are *simulated* data on parents, children and families. The data are simulated to come from 30 hypothetical countries around the world. These are the same data used and discussed in my book *[Multilevel Thinking: Discovering Variation, Universals, and Particulars in Cross-Cultural Research](https://academic.oup.com/book/60530)*.

There are two versions of the data: a *cross-sectional* data set from a single point in time; a *longitudinal* version of the data spanning several time points.

::: {.callout-note collapse="true"}
### The Data Can Be Downloaded Here:

* [Cross Sectional Data](https://github.com/agrogan1/multilevel-workshop/raw/refs/heads/main/simulated_multilevel_data.dta)
* [Longitudinal Data](https://github.com/agrogan1/multilevel-workshop/raw/refs/heads/main/simulated_multilevel_longitudinal_data.dta)
:::

```{r}
#| label: fig-globe
#| fig-cap: "Countries of the World"
#| warning: false
#| echo: false
#| fig-height: 3

if (knitr::is_html_output()) {

library(plotly)
  
library(dplyr)

# plot_geo() %>%
#   layout(title = "", 
#          geo = list(projection = list(type = 'orthographic'),
#                     showland = TRUE,  
#                     landcolor = toRGB("#1CABE2"),
#                     showcountries = TRUE,
#                     showocean = FALSE, 
#                     oceancolor = "LightBlue",
#                     lataxis = list(showgrid = TRUE,
#                                    gridcolor = toRGB("black")),
#                     lonaxis = list(showgrid = TRUE,
#                                    gridcolor = toRGB("black"))))

df <- read.csv("2014_world_gdp_with_codes.csv")
 
plot_geo(df) %>% 
  add_trace(locations = df$CODE,
            text = df$COUNTRY,
            hoverinfo='text',
            z = 1,
            color = 1,
            colorscale = "Blues") %>%
  layout(geo = list(showland = FALSE,
                    showcountries = TRUE,
                    projection = list(type = 'orthographic',
                                      rotation = list(lon = -30,
                                                      lat = 0,
                                                      roll = 0)))) %>% 
  hide_colorbar()
 
}

```

```{r}
#| echo: false
#| tbl-cap: "Variables in Simulated Multilevel Data"
#| label: tbl-describe

library(haven)

library(labelled)

library(pander)

library(dplyr)

simulated_multilevel_data <- read_dta("simulated_multilevel_data.dta")

pander(labelled::look_for(simulated_multilevel_data)[1:3])

```

```{r}
#| echo: false
#| tbl-cap: "Sample Data From Simulated Multilevel Data"
#| label: tbl-head

panderOptions('table.split.table', Inf) # pander table width

simulated_multilevel_data %>% 
  # select(country, HDI, identity, intervention,
  #        physical_punishment, warmth, outcome) %>%
  slice_sample(n=5) %>% 
  pander()

```







